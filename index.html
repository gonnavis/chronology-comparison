<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>chronology</title>
    <style>
        #control{
            position: fixed;
            top: 0;
            left: 0;
            background-color: #CCCCCC
        }
    </style>
</head>
<body onload="main();">
    <div id="control">
        历史年表对照：
        <select id="top_select">
            <option value ="china" selected>中华文明</option>
            <option value="india">印度河文明</option>
            <option value="egypt">埃及尼罗河流域文明</option>
            <option value="greece">希腊爱琴海文明</option>
            <option value="mesopotamia">两河流域文明</option>
            <option value ="japan">日本</option>
            <option value="russia">俄国</option>
        </select>
        VS
        <select id="bottom_select">
            <option value ="china">中华文明</option>
            <option value="india">印度河文明</option>
            <option value="egypt">埃及尼罗河流域文明</option>
            <option value="greece">希腊爱琴海文明</option>
            <option value="mesopotamia">两河流域文明</option>
            <option value ="japan" selected>日本</option>
            <option value="russia">俄国</option>
        </select>
        author: <a href="http://weibo.com/u/2637623441" target="_blank">@谢帅shawn</a>
    </div>

    <canvas id="main_canvas" width="6500" height="540"></canvas>
</body>
<script src="chronology.js"></script>
<script src="config.js"></script>
<script>
    var body = document.getElementsByTagName("body")[0];
    var canvas = document.getElementById("main_canvas");
    var ctx = canvas.getContext("2d");

    var top_select = document.getElementById("top_select");
    var bottom_select = document.getElementById("bottom_select");

    function main(){
        setTimeout(function(){
            body.scrollLeft = 3611;
        }, 10);


        drawHistory(ctx, CHINA, "top", 1);
        drawEvents(ctx, CHINA_EVENTS, "top");
        drawHistory(ctx, JAPAN, "bottom", 1);
        drawEvents(ctx, JAPAN_EVENTS, "bottom");
        drawMark(ctx);

        top_select.onchange = reDraw;

        bottom_select.onchange = reDraw;
    }

    function reDraw(){
        ctx.clearRect(0, 0, 6500, 540);
        var top = top_select.value.toUpperCase();
        var bottom = bottom_select.value.toUpperCase();
        drawHistory(ctx, window[top], "top", 1);
        drawEvents(ctx, window[top + "_EVENTS"], "top");
        drawHistory(ctx, window[bottom], "bottom", 1);
        drawEvents(ctx, window[bottom + "_EVENTS"], "bottom");
        drawMark(ctx);
    }

</script>
</html>